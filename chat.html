<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Minhas Caronas</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
        />
        <link rel="stylesheet" href="./assets/css/chat.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="./assets/scripts/chat.js"></script>
    </head>
    <body class="d-flex flex-column min-vh-100">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

        <script src="./assets/scripts/checkLogin.js"></script>
        <script src="./assets/scripts/login.js"></script>

        <header>
            <nav
                class="navbar navbar-expand-lg"
                style="background-color: rgba(167, 77, 250, 0.315)"
            >
                <div class="container-md">
                    <a class="navbar-brand ms-3 mb-0 h1 fw-bold" href="#">
                        <i class="bi bi-search">UniCaronas</i></a
                    >

                    <div class="d-flex flex-row-reverse">
                        <button
                            class="navbar-toggler"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#navbarNavDropdown"
                            aria-controls="navbarNavDropdown"
                            aria-expanded="false"
                            aria-label="Toggle navigation"
                        >
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div
                            class="collapse navbar-collapse"
                            id="navbarNavDropdown"
                        >
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a
                                        class="nav-link active"
                                        aria-current="page"
                                        href="#"
                                    >
                                        <img
                                            src="./assets/img/house.svg"
                                            alt="Logo"
                                            width="24"
                                            height="24"
                                            class="d-inline-block align-text-top"
                                        />
                                        Home &nbsp &nbsp &nbsp
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">
                                        <img
                                            src="./assets/img/chat.svg"
                                            alt="Logo"
                                            width="22"
                                            height="22"
                                            class="d-inline-block align-text-top"
                                        />
                                        Mensagens &nbsp &nbsp &nbsp
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">
                                        <img
                                            src="./assets/img/gear.svg"
                                            alt="Logo"
                                            width="24"
                                            height="24"
                                            class="d-inline-block align-text-top"
                                        />
                                        Configurações &nbsp &nbsp &nbsp
                                    </a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a
                                        class="nav-link dropdown-toggle"
                                        href="#"
                                        role="button"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false"
                                    >
                                        Meu Perfil
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <a class="dropdown-item" href="#"
                                                >Meus trajetos</a
                                            >
                                        </li>
                                        <li>
                                            <a class="dropdown-item" href="#"
                                                >Editar cadastro</a
                                            >
                                        </li>
                                        <li>
                                            <a class="dropdown-item" id="logout" href="#"
                                                >Log out</a
                                            >
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <main class="mb-3">
            <div class="container-fluid">
                <div id="mainrow" class="row">
                    <div class="col-md-4 h-100 d-inline-block mt-2">
                        <h1 class="title fs-4 text-right">Minhas Caronas</h1>
                        <div id="rides-list" class="list-group">
                            <a href="">Erro 404 NOT FOUND</a>
                        </div>
                    </div>
                    <div class="col-md-8 h-100 d-inline-block mt-2">
                        <h1 class="title fs-4 text-right mb-0">
                            Minhas Mensagens
                        </h1>

                        <div id="chat-container"></div>
                        <div id="messages-box" class="mt-2"></div>
                        <div id="messages-form" class="mt-1"></div>
                    </div>
                </div>
            </div>
        </main>

        <div id="modal" class="modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 id="modal-title" class="modal-title">
                            Modal title
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                            id="modal-close"
                        ></button>
                    </div>
                    <div id="modal-body" class="modal-body">
                        <p id="modal-text"></p>
                        <ul>
                            <li id="idade">
                                <b>Idade:</b>
                                <span id="pickupLocation"></span>
                            </li>
                            <li id="sexo">
                                <b>Sexo:</b>
                                <span id="dropoffLocation"></span>
                            </li>
                            <li id="uni">
                                <b>Universidade:</b>
                                <span id="estimatedFare"></span>
                            </li>
                            <li id="validation">
                                <b>Validação Institucional:</b>
                                <span id="estimatedFare"></span>
                            </li>
                            <li id="origem">
                                <b>Origem:</b>
                                <span id="estimatedFare"></span>
                            </li>
                            <li id="destino">
                                <b>Destino:</b>
                                <span id="estimatedFare"></span>
                            </li>
                            <li id="dias">
                                <b>Dia:</b>
                                <span id="estimatedFare"></span>
                            </li>
                            <li id="horarios">
                                <b>Horários:</b>
                                <span id="estimatedFare"></span>
                            </li>
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            id="modalClose"
                            data-bs-dismiss="modal"
                            class="btn btn-primary"
                        >
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evaluation Modal -->
        <div
            class="modal fade"
            id="evaluationModal"
            tabindex="-1"
            aria-labelledby="evaluationModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="evaluationModalTitle">
                            Avaliação da Carona
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <!-- Form for evaluation -->
                        <form id="evaluationForm"></form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                        >
                            Fechar
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="submitEvaluation"
                        >
                            Enviar Avaliação
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rejection Modal -->
        <div
            class="modal fade"
            id="rejectionModal"
            tabindex="-1"
            aria-labelledby="rejectionModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="rejectionModalLabel">
                            Carona Rejeitada
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <p id="rejectionMessage">
                            Esse agendamento foi rejeitado ou expirou porque a carona não ocorreu. Ele será removido em breve.                        </p>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <strong>Nome:</strong>
                                <span id="caronaName"></span>
                            </li>
                            <li class="list-group-item">
                                <strong>Data e Hora:</strong>
                                <span id="caronaTime"></span>
                            </li>
                            
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <footer style="background-color: #deded5" class="mt-auto">
            <div
                class="text-center p-3"
                style="background-color: rgba(0, 0, 0, 0.2)"
            >
                © 2024 Copyright:
                <a class="text-dark" href="#">UniCaronas.com</a>
            </div>
        </footer>

        <a
            data-bs-toggle="collapse"
            href="#collapseExample"
            role="button"
            aria-expanded="false"
            aria-controls="collapseExample"
        >
        </a>
        <script>
            $(document).ready(function () {
                // When the user clicks the send butto
                getUserCaronas();
            });
        </script>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"
        ></script>

    </body>
</html>
